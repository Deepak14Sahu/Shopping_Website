{"ast":null,"code":"import axios from \"axios\";\nimport { get_token } from \"./AccountSlice\";\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nconst BASE_URL = \"http://127.0.0.1:8000/api\";\nexport const registerUser = createAsyncThunk(\"registerUser\", async ({\n  name,\n  email,\n  password1\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${BASE_URL}/account/register/`, {\n      name: name,\n      email: email,\n      password: password1\n    });\n    return response.data;\n  } catch (error) {\n    if (error.response && error.response.status === 400) {\n      rejectWithValue(error.response.data.email[0]);\n    } else {\n      rejectWithValue('Network error. Please try again.');\n    }\n  }\n});\nexport const loginUser = createAsyncThunk(\"loginUser\", async ({\n  email,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`${BASE_URL}/account/token/`, {\n      email: email,\n      password: password\n    });\n    return response.data;\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      rejectWithValue('Incorrect email or password. Please try again.');\n    } else {\n      rejectWithValue('Network error. Please try again.');\n    }\n  }\n});\nexport const getAllProducts = createAsyncThunk(\"getProducts\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(`${BASE_URL}/product/list/`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(\"An error occured!! refresh\");\n  }\n});\nexport const productDetailsAPI = async ({\n  productId\n}) => {\n  try {\n    const response = await axios.get(`${BASE_URL}/product/list/${productId}/`);\n    return response.data;\n  } catch (error) {\n    if (error.response && error.response.status === 404) {\n      throw new Error(\"Page Not Found\");\n    }\n    throw new Error(\"An error occured!! refresh\");\n  }\n};\nexport const getCartProducts = createAsyncThunk(\"getCartProducts\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(`${BASE_URL}/product/cart/`, {\n      headers: {\n        'Authorization': 'Bearer ' + get_token().access\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(\"Session expired. Please login again!!\");\n  }\n});\nexport const addCartProduct = createAsyncThunk(\"addCartProducts\", async (productId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.put(`${BASE_URL}/product/cart/${productId}/add/`, {}, {\n      headers: {\n        'Authorization': 'Bearer ' + get_token().access\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(\"Session expired. Please login again!!\");\n  }\n});\nexport const removeCartProduct = createAsyncThunk(\"removeCartProducts\", async (productId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.put(`${BASE_URL}/product/cart/${productId}/remove/`, {}, {\n      headers: {\n        'Authorization': 'Bearer ' + get_token().access\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(\"Session expired. Please login again!!\");\n  }\n});\nexport const refreshAccessTokenAPI = async ({\n  refreshToken\n}) => {\n  try {\n    const response = await axios.post(`${BASE_URL}/account/token/refresh/`, {\n      refresh: refreshToken\n    });\n    return response.data;\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      throw new Error(\"Page Not Found\");\n    }\n    throw new Error(\"An error occured!! refresh\");\n  }\n};","map":{"version":3,"names":["axios","get_token","createAsyncThunk","BASE_URL","registerUser","name","email","password1","rejectWithValue","response","post","password","data","error","status","loginUser","getAllProducts","_","get","productDetailsAPI","productId","Error","getCartProducts","headers","access","addCartProduct","put","removeCartProduct","refreshAccessTokenAPI","refreshToken","refresh"],"sources":["/home/developer/Desktop/Full_Stack/Shopping_Website/frontend/src/features/apiProvider.js"],"sourcesContent":["import axios from \"axios\"\nimport { get_token } from \"./AccountSlice\"\nimport { createAsyncThunk } from \"@reduxjs/toolkit\"\n\nconst BASE_URL = \"http://127.0.0.1:8000/api\"\n\nexport const registerUser = createAsyncThunk(\"registerUser\", async ({ name, email, password1 }, { rejectWithValue }) => {\n    try {\n        const response = await axios.post(`${BASE_URL}/account/register/`, {\n            name: name,\n            email: email,\n            password: password1\n        })\n        return response.data\n    } catch (error) {\n        if (error.response && error.response.status === 400) {\n            rejectWithValue(error.response.data.email[0]);\n        } else {\n            rejectWithValue('Network error. Please try again.');\n        }\n    }\n})\n\nexport const loginUser = createAsyncThunk(\"loginUser\", async ({ email, password }, { rejectWithValue }) => {\n    try {\n        const response = await axios.post(`${BASE_URL}/account/token/`, {\n            email: email,\n            password: password\n        })\n        return response.data\n    } catch (error) {\n        if (error.response && error.response.status === 401) {\n            rejectWithValue('Incorrect email or password. Please try again.');\n        } else {\n            rejectWithValue('Network error. Please try again.');\n        }\n\n    }\n})\n\nexport const getAllProducts = createAsyncThunk(\"getProducts\", async (_, { rejectWithValue }) => {\n    try {\n        const response = await axios.get(`${BASE_URL}/product/list/`)\n        return response.data\n    } catch (error) {\n        return rejectWithValue(\"An error occured!! refresh\")\n    }\n})\n\nexport const productDetailsAPI = async ({ productId }) => {\n    try {\n        const response = await axios.get(`${BASE_URL}/product/list/${productId}/`)\n        return response.data\n    } catch (error) {\n        if (error.response && error.response.status === 404) {\n            throw new Error(\"Page Not Found\")\n        }\n        throw new Error(\"An error occured!! refresh\")\n    }\n}\n\nexport const getCartProducts = createAsyncThunk(\"getCartProducts\", async (_, { rejectWithValue }) => {\n    try {\n        const response = await axios.get(`${BASE_URL}/product/cart/`, {\n            headers: {\n                'Authorization': 'Bearer ' + get_token().access\n            }\n        })\n        return response.data\n    } catch (error) {\n        return rejectWithValue(\"Session expired. Please login again!!\")\n    }\n})\n\nexport const addCartProduct = createAsyncThunk(\"addCartProducts\", async (productId, { rejectWithValue }) => {\n    try {\n        const response = await axios.put(`${BASE_URL}/product/cart/${productId}/add/`, {}, {\n            headers: {\n                'Authorization': 'Bearer ' + get_token().access\n            }\n        })\n        return response.data\n    } catch (error) {\n        return rejectWithValue(\"Session expired. Please login again!!\")\n    }\n})\n\nexport const removeCartProduct = createAsyncThunk(\"removeCartProducts\", async (productId, { rejectWithValue }) => {\n    try {\n        const response = await axios.put(`${BASE_URL}/product/cart/${productId}/remove/`, {}, {\n            headers: {\n                'Authorization': 'Bearer ' + get_token().access\n            }\n        })\n        return response.data\n    } catch (error) {\n        return rejectWithValue(\"Session expired. Please login again!!\")\n    }\n})\n\nexport const refreshAccessTokenAPI = async ({ refreshToken }) => {\n    try {\n        const response = await axios.post(`${BASE_URL}/account/token/refresh/`, {\n            refresh: refreshToken\n        })\n        return response.data\n    } catch (error) {\n        if (error.response && error.response.status === 401) {\n            throw new Error(\"Page Not Found\")\n        }\n        throw new Error(\"An error occured!! refresh\")\n    }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}